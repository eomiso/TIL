<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lazy Evaluation과 Generator | Eomiso&#39;s TIL(Today I Learned)</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/TIL/logo.png">
    <meta name="description" content="Write what you have learned today">
    <link rel="preload" href="/TIL/assets/css/0.styles.34c10105.css" as="style"><link rel="preload" href="/TIL/assets/js/app.2722f0f6.js" as="script"><link rel="preload" href="/TIL/assets/js/2.2c4c9c51.js" as="script"><link rel="preload" href="/TIL/assets/js/32.fe1c9148.js" as="script"><link rel="prefetch" href="/TIL/assets/js/10.2f8e0e30.js"><link rel="prefetch" href="/TIL/assets/js/11.1ff1a57e.js"><link rel="prefetch" href="/TIL/assets/js/12.15c40c13.js"><link rel="prefetch" href="/TIL/assets/js/13.7bf652e1.js"><link rel="prefetch" href="/TIL/assets/js/14.c9414a20.js"><link rel="prefetch" href="/TIL/assets/js/15.2d01f370.js"><link rel="prefetch" href="/TIL/assets/js/16.0d89dffe.js"><link rel="prefetch" href="/TIL/assets/js/17.07c38e4d.js"><link rel="prefetch" href="/TIL/assets/js/18.442c0c06.js"><link rel="prefetch" href="/TIL/assets/js/19.1b5bf633.js"><link rel="prefetch" href="/TIL/assets/js/20.86bba05d.js"><link rel="prefetch" href="/TIL/assets/js/21.e544340d.js"><link rel="prefetch" href="/TIL/assets/js/22.65a2edf5.js"><link rel="prefetch" href="/TIL/assets/js/23.8b174a85.js"><link rel="prefetch" href="/TIL/assets/js/24.64fc03d5.js"><link rel="prefetch" href="/TIL/assets/js/25.ce0ae723.js"><link rel="prefetch" href="/TIL/assets/js/26.8b8ee881.js"><link rel="prefetch" href="/TIL/assets/js/27.bf8c97e7.js"><link rel="prefetch" href="/TIL/assets/js/28.142e3c12.js"><link rel="prefetch" href="/TIL/assets/js/29.81bd0da5.js"><link rel="prefetch" href="/TIL/assets/js/3.313ef446.js"><link rel="prefetch" href="/TIL/assets/js/30.359dbc7f.js"><link rel="prefetch" href="/TIL/assets/js/31.0727ec46.js"><link rel="prefetch" href="/TIL/assets/js/33.a56a58e6.js"><link rel="prefetch" href="/TIL/assets/js/34.27b6efed.js"><link rel="prefetch" href="/TIL/assets/js/35.62f50cfb.js"><link rel="prefetch" href="/TIL/assets/js/36.87dcc99f.js"><link rel="prefetch" href="/TIL/assets/js/37.0e07a91e.js"><link rel="prefetch" href="/TIL/assets/js/38.205eff79.js"><link rel="prefetch" href="/TIL/assets/js/39.aaa60523.js"><link rel="prefetch" href="/TIL/assets/js/4.b761c68e.js"><link rel="prefetch" href="/TIL/assets/js/40.6b01a59c.js"><link rel="prefetch" href="/TIL/assets/js/41.1eb27f61.js"><link rel="prefetch" href="/TIL/assets/js/42.6841e3f3.js"><link rel="prefetch" href="/TIL/assets/js/43.de455827.js"><link rel="prefetch" href="/TIL/assets/js/5.a3718665.js"><link rel="prefetch" href="/TIL/assets/js/6.13ab33a4.js"><link rel="prefetch" href="/TIL/assets/js/7.d95456ce.js"><link rel="prefetch" href="/TIL/assets/js/8.8630e26e.js"><link rel="prefetch" href="/TIL/assets/js/9.1c63a592.js">
    <link rel="stylesheet" href="/TIL/assets/css/0.styles.34c10105.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/TIL/" class="home-link router-link-active"><!----> <span class="site-name">Eomiso's TIL(Today I Learned)</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/eomiso" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://eomiso.blogspot.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/eomiso" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://eomiso.blogspot.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>1. Python</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/TIL/Python/numpy-testing.html" class="sidebar-link">assertEqual의 array version numpy.testing</a></li><li><a href="/TIL/Python/lazy-evaluation.html" class="active sidebar-link">Lazy Evaluation과 Generator</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/TIL/Python/lazy-evaluation.html#generator" class="sidebar-link">Generator</a></li><li class="sidebar-sub-header"><a href="/TIL/Python/lazy-evaluation.html#lazy-evaluation-느긋한-계산법" class="sidebar-link">Lazy-evaluation(느긋한 계산법)</a></li><li class="sidebar-sub-header"><a href="/TIL/Python/lazy-evaluation.html#추가-질문" class="sidebar-link">추가 질문</a></li></ul></li><li><a href="/TIL/Python/variable-ref-python.html" class="sidebar-link">파이썬 변수와 객체 간의 referencing 문제</a></li><li><a href="/TIL/Python/usage-of-underscore-in-python.html" class="sidebar-link">Usage of underscores in Python</a></li><li><a href="/TIL/Python/python_unpacking.html" class="sidebar-link">* operator : python unpacking</a></li><li><a href="/TIL/Python/python_os_check.html" class="sidebar-link">How to check directory paths in python</a></li><li><a href="/TIL/Python/kewords_check.html" class="sidebar-link">파이썬 **kwargs 에서 특정 키워드 존재여부 확인하기</a></li><li><a href="/TIL/Python/python_data_handle.html" class="sidebar-link">Python Daya Handling</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2. Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3. Java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4. C++</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5. Machine Learning</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>6. Computer Structure</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mics.</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="lazy-evaluation과-generator"><a href="#lazy-evaluation과-generator" class="header-anchor">#</a> Lazy Evaluation과 Generator</h1> <h2 id="generator"><a href="#generator" class="header-anchor">#</a> Generator</h2> <p>파이썬에서 사용되는 Generator를 이해하기 위해서는 우선 iterator에 대한 지식이 필요하다.
다음에 iterator에 대해서도 글을 쓰겠지만, 형태적인 차원에서 설명하자면 <code>__iter__</code>와 <code>__next__</code> 를 메소드로 가지고 있으면서, 호출된 후의 상태(state)를 저장하고 있다가 더 이상 내보낼 값이 없을 때 <code>StopIteration</code> 예외를 일으키는 클래스를 iterator라고 부른다.</p> <p>듣기 만해도 복잡해 보인다. ㅡㅡ;</p> <p>이렇듯 복잡한 iterator를 보다 쉽게 생성해주는 것이 바로 <strong>Generator</strong> 이다. 제네레이터를 통해 앞에서 언급한 기능과 메소드를 자동적으로 구현할 수 있는 것이다.</p> <h3 id="generator를-생성하는-방법"><a href="#generator를-생성하는-방법" class="header-anchor">#</a> Generator를 생성하는 방법</h3> <p>제네레이터를 생성하는 방법은 매우 간단하다. 그냥 함수에서 <code>return</code> 대신에 <code>yield</code>를 써주면 된다.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>함수에 yield statement가 한 개 이상 있으면 Generator라고 부른다.</p></div> <p>이 부분 때문에 Generator는 yield가 들어 있는 함수라고 이해하고 있는 사람들도 있다. 틀린말은 아니지만 정확히는 yield 는 iterator가 갖고 있는 여러 기능들을 보다 쉽게 구현해주록 파이썬에 내장된 statement이고 이를 통해서 간단하게 제네레이터를 만들 수 있다는 표현이 맞겠다(<s>그리고 그렇게 간단하게 생성된 제네레이터를 통해서 iterator를 만들 수 있는 것, 그게 그말인가??</s>)</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">num_generator</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">while</span> n<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">yield</span> n
        n <span class="token operator">-=</span> <span class="token number">1</span>
    <span class="token keyword">return</span> <span class="token string">'Error Message goes here'</span>

a <span class="token operator">=</span> num_generator<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><p>결과</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; a.__next__()
&gt;&gt;&gt; 3
&gt;&gt;&gt; a.__next__()
&gt;&gt;&gt; 2
&gt;&gt;&gt; a.__next__()
&gt;&gt;&gt; 1
&gt;&gt;&gt; a.__next__()
&gt;&gt;&gt; StopIteration: Error Message goes here
</code></pre></div><p>그래서 최종적으로 정리하자면 제네레이터는 다음과 같은 특징을 가지고 있다.</p> <ul><li>한 개 이상의 yield statement를 갖는다.</li> <li>호출 되었을 때 iterator를 반환한다.</li> <li><code>__iter__()</code> <code>__next__()</code> 같은 함수들이 자동적으로 적용되어, <code>&lt;generator&gt;.__next__()</code> 와 같이 사용가능하다.</li> <li>제네레이터가 yield를 실행한 후에는 control을 caller에게 넘긴다. 즉 실행을 잠시 멈춘다.</li> <li>이 때 제네레이터 내부의 지역변수(local variable)들과 그 값들이 다시 호출 되기 전까지 기억되어 있다. -&gt; 이게 어떻게 가능한 건지는 좀더 전체적인 아키텍쳐를 알게 되었을 때 설명할 수 있을 듯하다.</li> <li>그리고 함수가 실행을 마치면 <code>StopIteration</code> 예외가 발생한다.</li></ul> <h2 id="lazy-evaluation-느긋한-계산법"><a href="#lazy-evaluation-느긋한-계산법" class="header-anchor">#</a> Lazy-evaluation(느긋한 계산법)</h2> <p>자 이제 제네레이터에 대해 어느정도 알아 보았으니, 제네레이터와 관련하여 알아두어야할 개념인 <strong>Lazy-evaluation</strong> 에 대해 알아보자. <strong>Lazy-evaluation</strong> 은 제네레이터의 특징 중 4번째 특징과 관련된다.</p> <p>왜 Lazy 하다고 하느냐? yield를 하기 전에 계산을 완료해 놓지 않기 때문이다. 가령 위의 예시 코드에서 for 문은 한 번에 다 돌지 않고 <code>a.__next__()</code> 가 호출될 때만 돌게 된다. 만약에 일반적인 함수였다면 for 문은 한번에 다 돌았을 것이다.</p> <p>이 차이는 <code>[i for i in range(i)]</code> 와 <code>(i for i in range(i))</code>의 차이를 통해 확인할 수 있다.
전자는 한번에 생성되는 리스트지만 후자는 호출될 때마다 for 문이 한 단계씩 진행되면서 i를 반환하는 제네레이터이다.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>그래서 어떤 함수의 실행 시간을 측정할 때 만약에 그 함수가 제네레이터라면 측정된 결과가 그 함수에 적용된 알고리즘 고유의 수행시간(시간복잡도)가 아닐 수 있다. Lazy-Evaluation이 적용되기 때문이다.</p></div> <h2 id="추가-질문"><a href="#추가-질문" class="header-anchor">#</a> 추가 질문</h2> <p>제네레이터와 이터레이터, 그리고 코루틴 모두 실행 중에 호출자에게 control을 넘기는 특징을 가지고 있다. 이때 피호출자의 지역변수와 그 값들이 남아 있는데 이게 어떻게 가능한 것인지 궁금하다. 아마 파이썬이라는 언어의 전체적인 아키텍쳐를 이해할 수 있을 때 설명할 수 있을 것 같다.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/14/2020, 3:33:02 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/TIL/Python/numpy-testing.html" class="prev">
        assertEqual의 array version numpy.testing
      </a></span> <span class="next"><a href="/TIL/Python/variable-ref-python.html">
        파이썬 변수와 객체 간의 referencing 문제
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/TIL/assets/js/app.2722f0f6.js" defer></script><script src="/TIL/assets/js/2.2c4c9c51.js" defer></script><script src="/TIL/assets/js/32.fe1c9148.js" defer></script>
  </body>
</html>
